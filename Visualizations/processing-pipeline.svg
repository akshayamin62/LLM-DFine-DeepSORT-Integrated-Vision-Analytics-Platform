<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 1200 900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 24px Arial; text-anchor: middle; fill: #2c3e50; }
      .subtitle { font: bold 16px Arial; text-anchor: middle; fill: #34495e; }
      .node-text { font: 11px Arial; text-anchor: middle; fill: white; font-weight: bold; }
      .node-small { font: 9px Arial; text-anchor: middle; fill: white; }
      .arrow { stroke: #7f8c8d; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .decision-arrow { stroke: #e67e22; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .error-arrow { stroke: #e74c3c; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      
      .start-end { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
      .decision { fill: #f39c12; stroke: #e67e22; stroke-width: 2; }
      .process { fill: #27ae60; stroke: #229954; stroke-width: 2; }
      .ai-process { fill: #9b59b6; stroke: #8e44ad; stroke-width: 2; }
      .detection { fill: #e67e22; stroke: #d35400; stroke-width: 2; }
      .tracking { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
      .output { fill: #16a085; stroke: #138d75; stroke-width: 2; }
      .error { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7f8c8d" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="600" y="30" class="title">LLM-DFine-DeepSORT Processing Pipeline</text>
  <text x="600" y="55" class="subtitle">Detailed Component Interaction Flow</text>
  
  <!-- Start -->
  <ellipse cx="600" cy="100" rx="120" ry="25" class="start-end"/>
  <text x="600" y="95" class="node-text">ğŸ‘¤ User Uploads</text>
  <text x="600" y="110" class="node-small">File + Prompt</text>
  
  <!-- File Type Decision -->
  <polygon points="600,170 550,200 600,230 650,200" class="decision"/>
  <text x="600" y="195" class="node-small" fill="white">ğŸ“ File Type?</text>
  <text x="600" y="210" class="node-small" fill="white">Image or Video</text>
  
  <!-- Image Path -->
  <rect x="300" y="280" width="140" height="50" rx="10" class="process"/>
  <text x="370" y="300" class="node-text">ğŸ“· Image Path</text>
  <text x="370" y="315" class="node-small">Single Frame Processing</text>
  
  <!-- Video Path -->
  <rect x="660" y="280" width="140" height="50" rx="10" class="process"/>
  <text x="730" y="300" class="node-text">ğŸ¥ Video Path</text>
  <text x="730" y="315" class="node-small">Multi-Frame Processing</text>
  
  <!-- LLM Analysis (Image) -->
  <rect x="250" y="380" width="140" height="60" rx="10" class="ai-process"/>
  <text x="320" y="400" class="node-text">ğŸ§  LLM Analysis</text>
  <text x="320" y="415" class="node-small">Extract Parameters</text>
  <text x="320" y="430" class="node-small">Objects, ROI, Confidence</text>
  
  <!-- LLM Analysis (Video) -->
  <rect x="610" y="380" width="140" height="60" rx="10" class="ai-process"/>
  <text x="680" y="400" class="node-text">ğŸ§  LLM Analysis</text>
  <text x="680" y="415" class="node-small">Extract Parameters</text>
  <text x="680" y="430" class="node-small">Objects, ROI, Confidence</text>
  
  <!-- Parameter Validation (Image) -->
  <rect x="250" y="480" width="140" height="50" rx="10" class="ai-process"/>
  <text x="320" y="500" class="node-text">âœ… Parameter Validation</text>
  <text x="320" y="515" class="node-small">Smart Enhancement</text>
  
  <!-- Parameter Validation (Video) -->
  <rect x="610" y="480" width="140" height="50" rx="10" class="ai-process"/>
  <text x="680" y="500" class="node-text">âœ… Parameter Validation</text>
  <text x="680" y="515" class="node-small">Smart Enhancement</text>
  
  <!-- D-Fine Detection (Image) -->
  <rect x="250" y="580" width="140" height="50" rx="10" class="detection"/>
  <text x="320" y="600" class="node-text">ğŸ” D-Fine Detection</text>
  <text x="320" y="615" class="node-small">Single Frame Analysis</text>
  
  <!-- D-Fine Detection (Video) -->
  <rect x="610" y="580" width="140" height="50" rx="10" class="detection"/>
  <text x="680" y="600" class="node-text">ğŸ” D-Fine Detection</text>
  <text x="680" y="615" class="node-small">Multi-Frame Analysis</text>
  
  <!-- DeepSORT Tracking -->
  <rect x="810" y="580" width="140" height="60" rx="10" class="tracking"/>
  <text x="880" y="600" class="node-text">ğŸ¯ DeepSORT</text>
  <text x="880" y="615" class="node-small">Unique Object IDs</text>
  <text x="880" y="630" class="node-small">People Counting</text>
  
  <!-- Image Annotation -->
  <rect x="250" y="680" width="140" height="50" rx="10" class="output"/>
  <text x="320" y="700" class="node-text">ğŸ–Šï¸ Image Annotation</text>
  <text x="320" y="715" class="node-small">Bounding Boxes</text>
  
  <!-- Video Annotation -->
  <rect x="750" y="680" width="140" height="50" rx="10" class="output"/>
  <text x="820" y="700" class="node-text">ğŸ–Šï¸ Video Annotation</text>
  <text x="820" y="715" class="node-small">All Frames</text>
  
  <!-- Result Generation -->
  <rect x="480" y="780" width="240" height="50" rx="10" class="output"/>
  <text x="600" y="800" class="node-text">ğŸ“Š Generate Results</text>
  <text x="600" y="815" class="node-small">JSON Response + Annotated Media</text>
  
  <!-- Final Display -->
  <ellipse cx="600" cy="870" rx="120" ry="25" class="start-end"/>
  <text x="600" y="865" class="node-text">ğŸ–¥ï¸ Display Results</text>
  <text x="600" y="880" class="node-small">Web Interface</text>
  
  <!-- Error Handling -->
  <rect x="50" y="200" width="120" height="40" rx="5" class="error"/>
  <text x="110" y="215" class="node-small" fill="white">âŒ File Type Error</text>
  <text x="110" y="230" class="node-small" fill="white">Invalid Format</text>
  
  <rect x="50" y="400" width="120" height="40" rx="5" class="error"/>
  <text x="110" y="415" class="node-small" fill="white">âŒ LLM Error</text>
  <text x="110" y="430" class="node-small" fill="white">Processing Failed</text>
  
  <rect x="50" y="600" width="120" height="40" rx="5" class="error"/>
  <text x="110" y="615" class="node-small" fill="white">âŒ Detection Error</text>
  <text x="110" y="630" class="node-small" fill="white">Model Failed</text>
  
  <rect x="50" y="720" width="120" height="40" rx="5" class="error"/>
  <text x="110" y="735" class="node-small" fill="white">âš ï¸ Error Response</text>
  <text x="110" y="750" class="node-small" fill="white">User Notification</text>
  
  <!-- Main Flow Arrows -->
  <line x1="600" y1="125" x2="600" y2="170" class="arrow"/>
  <line x1="575" y1="200" x2="370" y2="280" class="decision-arrow"/>
  <line x1="625" y1="200" x2="730" y2="280" class="decision-arrow"/>
  <line x1="370" y1="330" x2="320" y2="380" class="arrow"/>
  <line x1="730" y1="330" x2="680" y2="380" class="arrow"/>
  <line x1="320" y1="440" x2="320" y2="480" class="arrow"/>
  <line x1="680" y1="440" x2="680" y2="480" class="arrow"/>
  <line x1="320" y1="530" x2="320" y2="580" class="arrow"/>
  <line x1="680" y1="530" x2="680" y2="580" class="arrow"/>
  <line x1="750" y1="605" x2="810" y2="605" class="arrow"/>
  <line x1="320" y1="630" x2="320" y2="680" class="arrow"/>
  <line x1="880" y1="640" x2="820" y2="680" class="arrow"/>
  <line x1="390" y1="705" x2="480" y2="780" class="arrow"/>
  <line x1="750" y1="705" x2="720" y2="780" class="arrow"/>
  <line x1="600" y1="830" x2="600" y2="845" class="arrow"/>
  
  <!-- Error Flow Arrows -->
  <line x1="550" y1="200" x2="170" y2="220" class="error-arrow"/>
  <line x1="250" y1="410" x2="170" y2="420" class="error-arrow"/>
  <line x1="250" y1="605" x2="170" y2="620" class="error-arrow"/>
  <line x1="110" y1="760" x2="500" y2="850" class="error-arrow"/>
  
  <!-- Branch Labels -->
  <text x="450" y="250" style="font: 12px Arial; fill: #e67e22; font-weight: bold;">Image</text>
  <text x="750" y="250" style="font: 12px Arial; fill: #e67e22; font-weight: bold;">Video</text>
  <text x="300" y="190" style="font: 10px Arial; fill: #e74c3c;">Invalid</text>
  
  <!-- DeepSORT Highlight -->
  <rect x="810" y="520" width="140" height="25" rx="5" fill="#e74c3c" opacity="0.8"/>
  <text x="880" y="535" style="font: bold 10px Arial; text-anchor: middle; fill: white;">ğŸŒŸ DEEPSORT SPECIAL FEATURE</text>
  <text x="880" y="550" style="font: 8px Arial; text-anchor: middle; fill: white;">Unique People Counting</text>
  
  <!-- Technology Stack Labels -->
  <rect x="980" y="100" width="200" height="200" rx="5" fill="none" stroke="#34495e" stroke-width="2"/>
  <text x="990" y="120" style="font: bold 14px Arial; fill: #2c3e50;">ğŸ”§ Technology Stack</text>
  
  <text x="1000" y="140" style="font: 11px Arial; fill: #34495e;">ğŸ§  Groq Llama-4-Scout-17B</text>
  <text x="1000" y="160" style="font: 11px Arial; fill: #34495e;">ğŸ” D-Fine Object Detection</text>
  <text x="1000" y="180" style="font: 11px Arial; fill: #34495e;">ğŸ¯ DeepSORT Tracking</text>
  <text x="1000" y="200" style="font: 11px Arial; fill: #34495e;">ğŸ“· OpenCV Processing</text>
  <text x="1000" y="220" style="font: 11px Arial; fill: #34495e;">ğŸ Flask Web Framework</text>
  <text x="1000" y="240" style="font: 11px Arial; fill: #34495e;">ğŸ’¾ Secure File Management</text>
  <text x="1000" y="260" style="font: 11px Arial; fill: #34495e;">âš¡ Real-time Processing</text>
  <text x="1000" y="280" style="font: 11px Arial; fill: #34495e;">ğŸ¨ Modern Web Interface</text>
  
  <!-- Performance Notes -->
  <rect x="980" y="320" width="200" height="160" rx="5" fill="none" stroke="#34495e" stroke-width="2"/>
  <text x="990" y="340" style="font: bold 14px Arial; fill: #2c3e50;">âš¡ Performance</text>
  
  <text x="1000" y="360" style="font: 10px Arial; fill: #34495e;">ğŸ“Š Image: ~1-3 seconds</text>
  <text x="1000" y="380" style="font: 10px Arial; fill: #34495e;">ğŸ¥ Video: ~5-15 sec/10s clip</text>
  <text x="1000" y="400" style="font: 10px Arial; fill: #34495e;">ğŸ§  LLM: ~0.5-1 second</text>
  <text x="1000" y="420" style="font: 10px Arial; fill: #34495e;">ğŸ¯ Accuracy: >90%</text>
  <text x="1000" y="440" style="font: 10px Arial; fill: #34495e;">ğŸ” Tracking: >85%</text>
  <text x="1000" y="460" style="font: 10px Arial; fill: #34495e;">ğŸ“ ROI Detection: >80%</text>
  
  <!-- Key Features Box -->
  <rect x="980" y="500" width="200" height="120" rx="5" fill="none" stroke="#34495e" stroke-width="2"/>
  <text x="990" y="520" style="font: bold 14px Arial; fill: #2c3e50;">ğŸŒŸ Special Features</text>
  
  <text x="1000" y="540" style="font: 10px Arial; fill: #34495e;">ğŸ¯ Unique People Counting</text>
  <text x="1000" y="560" style="font: 10px Arial; fill: #34495e;">ğŸ“ Natural Language Input</text>
  <text x="1000" y="580" style="font: 10px Arial; fill: #34495e;">ğŸ¨ ROI-based Detection</text>
  <text x="1000" y="600" style="font: 10px Arial; fill: #34495e;">âš¡ Multi-format Support</text>
</svg> 